<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask App - SQLite</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Sidebar lá»‹ch sá»­ -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>ğŸ“š Lá»‹ch sá»­</h2>
                <p>{{ history|length }} má»¥c trong database</p>
            </div>

            <div class="action-buttons">

                <button class="clear-all-btn" onclick="if(confirm('XÃ³a táº¥t cáº£ lá»‹ch sá»­?')) window.location.href='{{ url_for('main.clear_history') }}'">
                    ğŸ—‘ï¸ XÃ³a háº¿t
                </button>
            </div>

            <div class="history-list">
                {% if history %}
                    {% for item in history %}
                    <div class="history-item {% if current_id == item.id %}active{% endif %}"
                         onclick="window.location.href='{{ url_for('main.view_content', history_id=item.id) }}'">
                        <button class="delete-btn" onclick="event.stopPropagation(); if(confirm('XÃ³a má»¥c nÃ y?')) window.location.href='{{ url_for('main.delete_content', history_id=item.id) }}'">Ã—</button>
                        <div class="title">{{ item.content }}</div>
                        <div class="time">{{ format_time(item.created_at) }}</div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div style="text-align: center; padding: 20px; color: #95a5a6;">
                        ChÆ°a cÃ³ lá»‹ch sá»­ nÃ o
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Pháº§n ná»™i dung chÃ­nh -->
        <div class="main-content">
            <div class="content-header">
                <h1>ğŸ’¬ Ná»™i dung</h1>
            </div>

            <div class="content-body">
                {% if current_content %}
                <div class="content-display">
                    <div class="meta">
                        <strong>ğŸ†” ID:</strong> #{{ current_content.id }}
                        <strong>ğŸ• Thá»i gian:</strong> {{ format_time(current_content.created_at) }}<br>
                    </div>
                    <div class="content-text">
                      Text :  {{ current_content.content }}
                    </div>
                    <div class="content-text">
                      Sentiment :  {{ current_content.sentiment }}
                    </div>
                </div>
                {% else %}
                <div class="empty-state">
                    <h2>ğŸ‘‹ ChÃ o má»«ng!</h2>
                    <p>Nháº­p ná»™i dung bÃªn dÆ°á»›i Ä‘á»ƒ báº¯t Ä‘áº§u</p>
                    <p style="margin-top: 10px; font-size: 0.9em;">Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u vÃ o SQLite database</p>
                </div>
                {% endif %}
            </div>

            <div class="input-section">
                <form class="input-form" method="POST" action="{{ url_for('main.add_content') }}">
                    <input type="text" name="content" placeholder="Nháº­p ná»™i dung cá»§a báº¡n..." required>
                    <button type="submit">Gá»­i</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>